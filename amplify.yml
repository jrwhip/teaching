version: 1
frontend:
  phases:
    preBuild:
      commands:
        - |
          if [[ "${AWS_BRANCH}" == "experimental" ]]; then
            echo "Installing and using Node 18 for experimental branch"
            nvm install 18
            nvm use 18
          else
            echo "Installing and using Node 16 for other branches"
            nvm install 16
            nvm use 16
          fi
        - node --version
        - npm --version
        - npm ci --ignore-scripts
    build:
      commands:
        - npm run build
  artifacts:
    baseDirectory: dist/teaching/browser
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/*
