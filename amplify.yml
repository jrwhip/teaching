version: 1
frontend:
  phases:
    preBuild:
      commands:
        - |
          if [[ "${AWS_BRANCH}" == "experimental" ]]; then
            echo "Using Node 18 for experimental branch"
            nvm use 18
          else
            echo "Using Node 16 for other branches"
            nvm use 16
          fi
        - node --version
        - npm --version
        - npm ci --ignore-scripts
    build:
      commands:
        - npm run build
  artifacts:
    baseDirectory: dist/teaching/browser
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/*
